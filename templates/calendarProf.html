<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Nails Pro üíÖüèª</title>
</head>
<body>
    
     <!-- Mensajes flash -->
     {% with messages = get_flashed_messages(with_categories=true) %}
     {% if messages %}
         <div class="alerts">
             {% for category, message in messages %}
                 <div class="alert alert-{{ category }}">
                     {{ message }}
                 </div>
             {% endfor %}
         </div>
     {% endif %}
 {% endwith %}

    <h1>Calendario del Profesional</h1>
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Hora Inicio</th>
                <th>Hora Fin</th>
                <th>Estado</th>
                <th>ID Cliente</th>
                <th>Fecha</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for turno in turnos %}
            <tr>
                <td>{{ turno[0] }}</td>
                <td>{{ turno[1] }}</td>
                <td>{{ turno[2] }}</td>
                <td>{{ turno[3] }}</td>
                <td>{{ turno[4] }}</td>
                <td>{{ turno[5] }}</td>
                <td>
                    <form method="post" action="{{ url_for('calendar_profesional', profesional_id=profesional_id) }}">
                        <input type="hidden" name="turno_id" value="{{ turno[0] }}">
                        <label for="nuevo_estado_{{ turno[0] }}">Estado:</label>
                        <select id="nuevo_estado_{{ turno[0] }}" name="nuevo_estado" required>
                            <option value="disponible" {% if turno[3] == 'disponible' %}selected{% endif %}>Disponible</option>
                            <option value="reservado" {% if turno[3] == 'reservado' %}selected{% endif %}>Reservado</option>
                        </select>
                        <label for="nueva_fecha_{{ turno[0] }}">Fecha:</label>
                        <input type="date" id="nueva_fecha_{{ turno[0] }}" name="nueva_fecha" value="{{ turno[5] }}" required>
                        <button type="submit">Actualizar</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>